<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Application de Suivi de T√¢ches</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#2563eb" />
  
  <!-- React et d√©pendances -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <!-- Style pour les animations -->
  <style>
    @keyframes slideUp {
      from { transform: translateY(100%); }
      to { transform: translateY(0); }
    }
    .animate-slide-up { animation: slideUp 0.3s ease-out; }
    
    .task-completed {
      transition: all 0.3s ease;
      opacity: 0.6;
      transform: scale(0.98);
    }
  </style>
</head>
<body class="bg-gray-50">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;
    
    // Configuration compl√®te selon l'application originale
    const categories = {
      personnel: { label: 'Personnel', color: 'bg-blue-500', emoji: 'üë§' },
      travail: { label: 'Travail', color: 'bg-purple-500', emoji: 'üíº' },
      shopping: { label: 'Shopping', color: 'bg-green-500', emoji: 'üõí' },
      sante: { label: 'Sant√©', color: 'bg-red-500', emoji: '‚ù§Ô∏è' },
      loisirs: { label: 'Loisirs', color: 'bg-orange-500', emoji: 'üé®' }
    };

    const priorities = {
      low: { label: 'Faible', color: 'bg-green-100 text-green-800', icon: '‚óè' },
      medium: { label: 'Moyenne', color: 'bg-yellow-100 text-yellow-800', icon: '‚óè‚óè' },
      high: { label: '√âlev√©e', color: 'bg-red-100 text-red-800', icon: '‚óè‚óè‚óè' }
    };

    // Ic√¥nes SVG int√©gr√©es
    const Icons = {
      Plus: () => (
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
      ),
      Check: () => (
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
          <polyline points="20,6 9,17 4,12"></polyline>
        </svg>
      ),
      MoreVertical: () => (
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
          <circle cx="12" cy="12" r="1"></circle>
          <circle cx="12" cy="5" r="1"></circle>
          <circle cx="12" cy="19" r="1"></circle>
        </svg>
      ),
      Edit3: () => (
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
          <path d="M12 20h9"></path>
          <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
        </svg>
      ),
      Trash2: () => (
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
          <polyline points="3,6 5,6 21,6"></polyline>
          <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
        </svg>
      ),
      X: () => (
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      ),
      Search: () => (
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="21 21l-4.35-4.35"></path>
        </svg>
      ),
      Calendar: () => (
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
      ),
      Clock: () => (
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12,6 12,12 16,14"></polyline>
        </svg>
      ),
      AlertCircle: () => (
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="8" x2="12" y2="12"></line>
          <line x1="12" y1="16" x2="12.01" y2="16"></line>
        </svg>
      )
    };

    const TaskTrackerApp = () => {
      const [tasks, setTasks] = useState([]);
      const [showAddTask, setShowAddTask] = useState(false);
      const [filter, setFilter] = useState('all');
      const [searchTerm, setSearchTerm] = useState('');
      const [editingTask, setEditingTask] = useState(null);
      const [showDailyReview, setShowDailyReview] = useState(false);
      const [newTask, setNewTask] = useState({
        title: '',
        description: '',
        priority: 'medium',
        category: 'personnel',
        dueDate: '',
        estimatedTime: ''
      });

      const addTask = () => {
        if (newTask.title.trim()) {
          const task = {
            id: Date.now(),
            ...newTask,
            completed: false,
            createdAt: new Date().toISOString(),
            completedAt: null
          };
          setTasks([task, ...tasks]);
          setNewTask({
            title: '',
            description: '',
            priority: 'medium',
            category: 'personnel',
            dueDate: '',
            estimatedTime: ''
          });
          setShowAddTask(false);
        }
      };

      const toggleTask = (id) => {
        setTasks(tasks.map(task => 
          task.id === id 
            ? { ...task, completed: !task.completed, completedAt: !task.completed ? new Date().toISOString() : null }
            : task
        ));
      };

      const deleteTask = (id) => {
        setTasks(tasks.filter(task => task.id !== id));
      };

      const updateTask = (id, updatedTask) => {
        setTasks(tasks.map(task => 
          task.id === id ? { ...task, ...updatedTask } : task
        ));
        setEditingTask(null);
      };

      const getTaskStats = () => {
        const total = tasks.length;
        const completed = tasks.filter(t => t.completed).length;
        const overdue = tasks.filter(t => t.dueDate && t.dueDate < new Date().toISOString().split('T')[0] && !t.completed).length;
        const today = new Date().toISOString().split('T')[0];
        const completedToday = tasks.filter(t => 
          t.completed && t.completedAt && 
          new Date(t.completedAt).toISOString().split('T')[0] === today
        ).length;
        return { total, completed, overdue, pending: total - completed, completedToday };
      };

      const getTodayCompletedTasks = () => {
        const today = new Date().toISOString().split('T')[0];
        return tasks.filter(t => 
          t.completed && t.completedAt && 
          new Date(t.completedAt).toISOString().split('T')[0] === today
        );
      };

      const filteredTasks = tasks.filter(task => {
        const matchesSearch = task.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                             task.description.toLowerCase().includes(searchTerm.toLowerCase());
        
        switch(filter) {
          case 'completed':
            return task.completed && matchesSearch;
          case 'pending':
            return !task.completed && matchesSearch;
          case 'today':
            const today = new Date().toISOString().split('T')[0];
            return task.dueDate === today && matchesSearch;
          case 'overdue':
            const now = new Date().toISOString().split('T')[0];
            return task.dueDate && task.dueDate < now && !task.completed && matchesSearch;
          default:
            return matchesSearch;
        }
      });

      const stats = getTaskStats();
      const isOverdue = (dueDate, completed) => {
        if (!dueDate || completed) return false;
        return dueDate < new Date().toISOString().split('T')[0];
      };

      const formatDate = (dateString) => {
        if (!dateString) return '';
        const date = new Date(dateString);
        const today = new Date();
        const tomorrow = new Date(today);
        tomorrow.setDate(tomorrow.getDate() + 1);
        
        if (date.toDateString() === today.toDateString()) return 'Aujourd\'hui';
        if (date.toDateString() === tomorrow.toDateString()) return 'Demain';
        
        return date.toLocaleDateString('fr-FR', { 
          weekday: 'short', 
          month: 'short', 
          day: 'numeric' 
        });
      };

      return (
        <div className="min-h-screen bg-gray-50">
          {/* Header */}
          <div className="bg-white shadow-sm border-b sticky top-0 z-10">
            <div className="px-4 py-4">
              <div className="flex items-center justify-between mb-4">
                <h1 className="text-2xl font-bold text-gray-900">Mes T√¢ches</h1>
                <div className="flex items-center space-x-2">
                  {stats.completedToday > 0 && (
                    <button
                      onClick={() => setShowDailyReview(true)}
                      className="bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-700 transition-colors"
                    >
                      üìù Valider ma journ√©e
                    </button>
                  )}
                  <button
                    onClick={() => setShowAddTask(true)}
                    className="bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 transition-colors"
                  >
                    <Icons.Plus />
                  </button>
                </div>
              </div>

              {/* Stats */}
              <div className="grid grid-cols-5 gap-2 mb-4">
                <div className="text-center p-2 bg-blue-50 rounded-lg">
                  <div className="text-lg font-bold text-blue-600">{stats.total}</div>
                  <div className="text-xs text-blue-600">Total</div>
                </div>
                <div className="text-center p-2 bg-green-50 rounded-lg">
                  <div className="text-lg font-bold text-green-600">{stats.completed}</div>
                  <div className="text-xs text-green-600">Termin√©es</div>
                </div>
                <div className="text-center p-2 bg-yellow-50 rounded-lg">
                  <div className="text-lg font-bold text-yellow-600">{stats.pending}</div>
                  <div className="text-xs text-yellow-600">En cours</div>
                </div>
                <div className="text-center p-2 bg-red-50 rounded-lg">
                  <div className="text-lg font-bold text-red-600">{stats.overdue}</div>
                  <div className="text-xs text-red-600">En retard</div>
                </div>
                <div className="text-center p-2 bg-purple-50 rounded-lg">
                  <div className="text-lg font-bold text-purple-600">{stats.completedToday}</div>
                  <div className="text-xs text-purple-600">Aujourd'hui</div>
                </div>
              </div>

              {/* Search */}
              <div className="relative mb-3">
                <Icons.Search />
                <input
                  type="text"
                  placeholder="Rechercher une t√¢che..."
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                  className="w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                />
              </div>

              {/* Filter buttons */}
              <div className="flex space-x-2 overflow-x-auto pb-2">
                {[
                  { key: 'all', label: 'Toutes' },
                  { key: 'pending', label: 'En cours' },
                  { key: 'completed', label: 'Termin√©es' },
                  { key: 'today', label: 'Aujourd\'hui' },
                  { key: 'overdue', label: 'En retard' }
                ].map(filterOption => (
                  <button
                    key={filterOption.key}
                    onClick={() => setFilter(filterOption.key)}
                    className={`px-4 py-2 rounded-full text-sm whitespace-nowrap transition-colors ${
                      filter === filterOption.key
                        ? 'bg-blue-600 text-white'
                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                    }`}
                  >
                    {filterOption.label}
                  </button>
                ))}
              </div>
            </div>
          </div>

          {/* Tasks List */}
          <div className="px-4 py-4 pb-20">
            {filteredTasks.length === 0 ? (
              <div className="text-center py-12">
                <div className="text-gray-400 mb-4">
                  <Icons.Check />
                </div>
                <p className="text-gray-500 text-lg">
                  {tasks.length === 0 ? 'Aucune t√¢che pour le moment' : 'Aucune t√¢che trouv√©e'}
                </p>
                <p className="text-gray-400 text-sm mt-2">
                  {tasks.length === 0 ? 'Ajoutez votre premi√®re t√¢che !' : 'Essayez un autre filtre'}
                </p>
              </div>
            ) : (
              <div className="space-y-3">
                {filteredTasks.map(task => (
                  <TaskCard
                    key={task.id}
                    task={task}
                    onToggle={() => toggleTask(task.id)}
                    onDelete={() => deleteTask(task.id)}
                    onEdit={() => setEditingTask(task)}
                    isOverdue={isOverdue(task.dueDate, task.completed)}
                    formatDate={formatDate}
                  />
                ))}
              </div>
            )}
          </div>

          {/* Modals */}
          {showAddTask && (
            <TaskModal
              task={newTask}
              setTask={setNewTask}
              onSave={addTask}
              onCancel={() => {
                setShowAddTask(false);
                setNewTask({
                  title: '',
                  description: '',
                  priority: 'medium',
                  category: 'personnel',
                  dueDate: '',
                  estimatedTime: ''
                });
              }}
              title="Nouvelle T√¢che"
            />
          )}

          {editingTask && (
            <TaskModal
              task={editingTask}
              setTask={setEditingTask}
              onSave={(task) => updateTask(editingTask.id, task)}
              onCancel={() => setEditingTask(null)}
              title="Modifier la T√¢che"
            />
          )}

          {showDailyReview && (
            <DailyReviewModal
              completedTasks={getTodayCompletedTasks()}
              stats={stats}
              onClose={() => setShowDailyReview(false)}
            />
          )}
        </div>
      );
    };

    const TaskCard = ({ task, onToggle, onDelete, onEdit, isOverdue, formatDate }) => {
      const [showMenu, setShowMenu] = useState(false);
      const priority = priorities[task.priority];
      const category = categories[task.category];

      return (
        <div className={`bg-white rounded-xl border shadow-sm transition-all ${
          task.completed ? 'opacity-75 bg-gray-50' : ''
        } ${isOverdue ? 'border-red-200 bg-red-50' : 'border-gray-200'}`}>
          <div className="p-4">
            <div className="flex items-start space-x-3">
              <button
                onClick={onToggle}
                className={`flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center mt-1 transition-colors ${
                  task.completed
                    ? 'bg-green-500 border-green-500'
                    : 'border-gray-300 hover:border-blue-500'
                }`}
              >
                {task.completed && <Icons.Check />}
              </button>

              <div className="flex-1 min-w-0">
                <div className="flex items-start justify-between">
                  <div className="flex-1">
                    <h3 className={`font-medium text-gray-900 ${
                      task.completed ? 'line-through text-gray-500' : ''
                    }`}>
                      {task.title}
                    </h3>
                    {task.description && (
                      <p className={`text-sm mt-1 ${
                        task.completed ? 'text-gray-400' : 'text-gray-600'
                      }`}>
                        {task.description}
                      </p>
                    )}
                  </div>

                  <div className="relative ml-2">
                    <button
                      onClick={() => setShowMenu(!showMenu)}
                      className="p-1 text-gray-400 hover:text-gray-600 transition-colors"
                    >
                      <Icons.MoreVertical />
                    </button>

                    {showMenu && (
                      <div className="absolute right-0 top-8 bg-white rounded-lg shadow-lg border z-20 min-w-32">
                        <button
                          onClick={() => {
                            onEdit();
                            setShowMenu(false);
                          }}
                          className="flex items-center space-x-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 w-full text-left rounded-t-lg"
                        >
                          <Icons.Edit3 />
                          <span>Modifier</span>
                        </button>
                        <button
                          onClick={() => {
                            onDelete();
                            setShowMenu(false);
                          }}
                          className="flex items-center space-x-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left rounded-b-lg"
                        >
                          <Icons.Trash2 />
                          <span>Supprimer</span>
                        </button>
                      </div>
                    )}
                  </div>
                </div>

                <div className="flex items-center flex-wrap gap-2 mt-3">
                  {/* Category */}
                  <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium text-white ${category.color}`}>
                    <span className="mr-1">{category.emoji}</span>
                    {category.label}
                  </span>

                  {/* Priority */}
                  <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${priority.color}`}>
                    {priority.icon} {priority.label}
                  </span>

                  {/* Due date */}
                  {task.dueDate && (
                    <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${
                      isOverdue 
                        ? 'bg-red-100 text-red-800' 
                        : task.dueDate === new Date().toISOString().split('T')[0]
                        ? 'bg-orange-100 text-orange-800'
                        : 'bg-gray-100 text-gray-800'
                    }`}>
                      <Icons.Calendar />
                      <span className="ml-1">{formatDate(task.dueDate)}</span>
                      {isOverdue && <Icons.AlertCircle />}
                    </span>
                  )}

                  {/* Estimated time */}
                  {task.estimatedTime && (
                    <span className="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                      <Icons.Clock />
                      <span className="ml-1">{task.estimatedTime}</span>
                    </span>
                  )}
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    };

    const TaskModal = ({ task, setTask, onSave, onCancel, title }) => {
      const handleSave = () => {
        if (task.title.trim()) {
          onSave(task);
        }
      };

      const today = new Date().toISOString().split('T')[0];

      return (
        <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-end">
          <div className="bg-white rounded-t-2xl w-full max-h-[90vh] overflow-y-auto animate-slide-up">
            <div className="p-4 border-b sticky top-0 bg-white">
              <div className="flex items-center justify-between">
                <h2 className="text-xl font-semibold text-gray-900">{title}</h2>
                <button
                  onClick={onCancel}
                  className="p-2 text-gray-400 hover:text-gray-600"
                >
                  <Icons.X />
                </button>
              </div>
            </div>

            <div className="p-4 space-y-4">
              {/* Title */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Titre *
                </label>
                <input
                  type="text"
                  value={task.title}
                  onChange={(e) => setTask({ ...task, title: e.target.value })}
                  placeholder="Nom de la t√¢che..."
                  className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  autoFocus
                />
              </div>

              {/* Description */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Description
                </label>
                <textarea
                  value={task.description}
                  onChange={(e) => setTask({ ...task, description: e.target.value })}
                  placeholder="Description d√©taill√©e..."
                  rows="3"
                  className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
                />
              </div>

              {/* Category and Priority */}
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Cat√©gorie
                  </label>
                  <select
                    value={task.category}
                    onChange={(e) => setTask({ ...task, category: e.target.value })}
                    className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  >
                    {Object.entries(categories).map(([key, category]) => (
                      <option key={key} value={key}>
                        {category.emoji} {category.label}
                      </option>
                    ))}
                  </select>
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Priorit√©
                  </label>
                  <select
                    value={task.priority}
                    onChange={(e) => setTask({ ...task, priority: e.target.value })}
                    className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  >
                    {Object.entries(priorities).map(([key, priority]) => (
                      <option key={key} value={key}>
                        {priority.icon} {priority.label}
                      </option>
                    ))}
                  </select>
                </div>
              </div>

              {/* Due date and estimated time */}
              <div className="grid grid-cols-2 gap-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Date d'√©ch√©ance
                  </label>
                  <input
                    type="date"
                    value={task.dueDate}
                    onChange={(e) => setTask({ ...task, dueDate: e.target.value })}
                    min={today}
                    className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Temps estim√©
                  </label>
                  <select
                    value={task.estimatedTime}
                    onChange={(e) => setTask({ ...task, estimatedTime: e.target.value })}
                    className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  >
                    <option value="">Non d√©fini</option>
                    <option value="15min">15 minutes</option>
                    <option value="30min">30 minutes</option>
                    <option value="1h">1 heure</option>
                    <option value="2h">2 heures</option>
                    <option value="1j">1 journ√©e</option>
                    <option value="2j+">2+ journ√©es</option>
                  </select>
                </div>
              </div>
            </div>

            <div className="p-4 border-t bg-gray-50 sticky bottom-0">
              <div className="flex space-x-3">
                <button
                  onClick={onCancel}
                  className="flex-1 py-3 px-4 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"
                >
                  Annuler
                </button>
                <button
                  onClick={handleSave}
                  disabled={!task.title.trim()}
                  className="flex-1 py-3 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                >
                  Enregistrer
                </button>
              </div>
            </div>
          </div>
        </div>
      );
    };

    const DailyReviewModal = ({ completedTasks, stats, onClose }) => {
      const today = new Date();
      const todayStr = today.toLocaleDateString('fr-FR', { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
      });

      const getCompletionRate = () => {
        if (stats.total === 0) return 0;
        return Math.round((stats.completedToday / stats.total) * 100);
      };

      const getCategoryBreakdown = () => {
        const breakdown = {};
        completedTasks.forEach(task => {
          breakdown[task.category] = (breakdown[task.category] || 0) + 1;
        });
        return breakdown;
      };

      const getPriorityBreakdown = () => {
        const breakdown = {};
        completedTasks.forEach(task => {
          breakdown[task.priority] = (breakdown[task.priority] || 0) + 1;
        });
        return breakdown;
      };

      const categoryBreakdown = getCategoryBreakdown();
      const priorityBreakdown = getPriorityBreakdown();

      return (
        <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
          <div className="bg-white rounded-2xl w-full max-w-md max-h-[90vh] overflow-y-auto animate-slide-up">
            <div className="p-6">
              {/* Header */}
              <div className="text-center mb-6">
                <div className="text-4xl mb-2">üéâ</div>
                <h2 className="text-2xl font-bold text-gray-900 mb-1">F√©licitations !</h2>
                <p className="text-gray-600 text-sm">{todayStr}</p>
              </div>

              {/* Main Stats */}
              <div className="bg-gradient-to-r from-green-500 to-blue-600 rounded-xl text-white p-6 mb-6 text-center">
                <div className="text-3xl font-bold mb-2">{stats.completedToday}</div>
                <div className="text-lg mb-2">t√¢ches accomplies</div>
                <div className="text-sm opacity-90">
                  {getCompletionRate()}% de vos t√¢ches termin√©es
                </div>
              </div>

              {/* Completed Tasks List */}
              {completedTasks.length > 0 && (
                <div className="mb-6">
                  <h3 className="font-semibold text-gray-900 mb-3">T√¢ches accomplies :</h3>
                  <div className="space-y-2 max-h-48 overflow-y-auto">
                    {completedTasks.map(task => (
                      <div key={task.id} className="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                        <div className="w-5 h-5 bg-green-500 rounded-full flex items-center justify-center">
                          <Icons.Check />
                        </div>
                        <div className="flex-1">
                          <div className="font-medium text-gray-900">{task.title}</div>
                          <div className="flex items-center space-x-2 mt-1">
                            <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs text-white ${categories[task.category].color}`}>
                              {categories[task.category].emoji} {categories[task.category].label}
                            </span>
                            <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs ${priorities[task.priority].color}`}>
                              {priorities[task.priority].icon}
                            </span>
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              )}

              {/* Breakdown */}
              <div className="grid grid-cols-2 gap-4 mb-6">
                {/* Categories */}
                <div>
                  <h4 className="font-medium text-gray-900 mb-2">Par cat√©gorie</h4>
                  <div className="space-y-1">
                    {Object.entries(categoryBreakdown).map(([cat, count]) => (
                      <div key={cat} className="flex items-center justify-between text-sm">
                        <span className="flex items-center">
                          <span className="mr-2">{categories[cat].emoji}</span>
                          {categories[cat].label}
                        </span>
                        <span className="font-medium">{count}</span>
                      </div>
                    ))}
                  </div>
                </div>

                {/* Priorities */}
                <div>
                  <h4 className="font-medium text-gray-900 mb-2">Par priorit√©</h4>
                  <div className="space-y-1">
                    {Object.entries(priorityBreakdown).map(([priority, count]) => (
                      <div key={priority} className="flex items-center justify-between text-sm">
                        <span className="flex items-center">
                          <span className="mr-2">{priorities[priority].icon}</span>
                          {priorities[priority].label}
                        </span>
                        <span className="font-medium">{count}</span>
                      </div>
                    ))}
                  </div>
                </div>
              </div>

              {/* Motivational Message */}
              <div className="bg-blue-50 rounded-lg p-4 mb-6">
                <div className="text-center">
                  {stats.completedToday >= 5 ? (
                    <div>
                      <div className="text-2xl mb-2">üöÄ</div>
                      <div className="font-semibold text-blue-900">Journ√©e exceptionnelle !</div>
                      <div className="text-sm text-blue-700 mt-1">Vous √™tes tr√®s productif aujourd'hui !</div>
                    </div>
                  ) : stats.completedToday >= 3 ? (
                    <div>
                      <div className="text-2xl mb-2">üëç</div>
                      <div className="font-semibold text-blue-900">Belle journ√©e !</div>
                      <div className="text-sm text-blue-700 mt-1">Vous avez bien avanc√© sur vos t√¢ches.</div>
                    </div>
                  ) : (
                    <div>
                      <div className="text-2xl mb-2">üí™</div>
                      <div className="font-semibold text-blue-900">C'est un bon d√©but !</div>
                      <div className="text-sm text-blue-700 mt-1">Chaque t√¢che accomplie compte.</div>
                    </div>
                  )}
                </div>
              </div>

              {/* Close Button */}
              <button
                onClick={onClose}
                className="w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors"
              >
                Parfait, continuer !
              </button>
            </div>
          </div>
        </div>
      );
    };

    // Rendu de l'application
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<TaskTrackerApp />);
  </script>

  <!-- Register service worker -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js')
          .then(registration => console.log('SW registered'))
          .catch(error => console.log('SW registration failed'));
      });
    }
  </script>
</body>
</html>
